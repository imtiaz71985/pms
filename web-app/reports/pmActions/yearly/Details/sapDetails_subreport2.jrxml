<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="sapDetails_subreport2" language="groovy" pageWidth="832" pageHeight="572" orientation="Landscape" columnWidth="832" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="6fdbea04-6465-4ee7-8c30-265e7b8be426">
	<property name="ireport.zoom" value="1.0000000000000029"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="REPORT_DIR" class="java.lang.String"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String"/>
	<parameter name="ROOT_DIR" class="java.lang.String"/>
	<parameter name="year" class="java.lang.Integer"/>
	<parameter name="serviceId" class="java.lang.Long"/>
	<queryString>
		<![CDATA[SELECT a.sequence,ai.indicator,aid.month_name,
CASE
WHEN POSITION("%" IN ai.indicator_type)!=0 THEN CONCAT(aid.target, '%')
ELSE aid.target END AS target,
CASE
WHEN POSITION("%" IN ai.indicator_type)!=0 THEN CONCAT(aid.achievement, '%')
ELSE aid.achievement END AS achievement,
CASE WHEN  COALESCE(MONTHNAME(ai.closing_month),'')=aid.month_name THEN CONCAT(aid.remarks, '<style isBold="true" pdfFontName="Helvetica-Bold"> Closing note:- </style>'
,ai.closing_note) ELSE aid.remarks END
remarks
FROM pm_actions_indicator_details aid
LEFT JOIN pm_actions_indicator ai ON ai.id = aid.indicator_id AND ai.year = $P{year}
LEFT JOIN pm_actions a ON a.id = ai.actions_id AND a.year = $P{year}
JOIN custom_month cm ON cm.name=aid.month_name
WHERE a.service_id = $P{serviceId} AND a.year = $P{year}
 AND (( cm.sl_index <= MONTH(a.end) AND cm.sl_index >= MONTH(a.start))
 OR COALESCE(ai.is_extend,FALSE)=TRUE)
 ORDER BY a.year, a.goal_id ,a.tmp_seq,aid.indicator_id]]>
	</queryString>
	<field name="sequence" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="indicator" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="month_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="target" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="achievement" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="remarks" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<background>
		<band splitType="Stretch"/>
	</background>
	<columnHeader>
		<band height="44">
			<staticText>
				<reportElement positionType="Float" stretchType="RelativeToTallestObject" x="324" y="24" width="105" height="20" uuid="5cc84b04-30a1-4644-b279-f90ccbc78797"/>
				<box topPadding="2" leftPadding="2">
					<topPen lineWidth="0.5" lineColor="#939597"/>
					<leftPen lineWidth="0.5" lineColor="#939597"/>
					<bottomPen lineWidth="0.5" lineColor="#939597"/>
					<rightPen lineWidth="0.5" lineColor="#939597"/>
				</box>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[Target]]></text>
			</staticText>
			<staticText>
				<reportElement positionType="Float" stretchType="RelativeToTallestObject" x="232" y="24" width="92" height="20" uuid="d435b5e1-ce73-4e03-94c7-832acda982f2"/>
				<box topPadding="2" leftPadding="2">
					<topPen lineWidth="0.5" lineColor="#939597"/>
					<leftPen lineWidth="0.5" lineColor="#939597"/>
					<bottomPen lineWidth="0.5" lineColor="#939597"/>
					<rightPen lineWidth="0.5" lineColor="#939597"/>
				</box>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[Month]]></text>
			</staticText>
			<staticText>
				<reportElement positionType="Float" stretchType="RelativeToTallestObject" x="542" y="24" width="290" height="20" uuid="67613919-c14c-49b7-b916-53565e52e386"/>
				<box topPadding="2" leftPadding="2">
					<topPen lineWidth="0.5" lineColor="#939597"/>
					<leftPen lineWidth="0.5" lineColor="#939597"/>
					<bottomPen lineWidth="0.5" lineColor="#939597"/>
					<rightPen lineWidth="0.5" lineColor="#939597"/>
				</box>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[Remarks]]></text>
			</staticText>
			<staticText>
				<reportElement positionType="Float" stretchType="RelativeToTallestObject" x="429" y="24" width="113" height="20" uuid="c719d380-1894-4716-ab93-b50c7679bbf2"/>
				<box topPadding="2" leftPadding="2">
					<topPen lineWidth="0.5" lineColor="#939597"/>
					<leftPen lineWidth="0.5" lineColor="#939597"/>
					<bottomPen lineWidth="0.5" lineColor="#939597"/>
					<rightPen lineWidth="0.5" lineColor="#939597"/>
				</box>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[Achievement]]></text>
			</staticText>
			<staticText>
				<reportElement positionType="Float" stretchType="RelativeToTallestObject" x="68" y="24" width="164" height="20" uuid="8edb271e-a323-44a6-98b8-d7f8fec951ae"/>
				<box topPadding="2" leftPadding="2">
					<topPen lineWidth="0.5" lineColor="#939597"/>
					<leftPen lineWidth="0.5" lineColor="#939597"/>
					<bottomPen lineWidth="0.5" lineColor="#939597"/>
					<rightPen lineWidth="0.5" lineColor="#939597"/>
				</box>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[Indicator]]></text>
			</staticText>
			<staticText>
				<reportElement positionType="Float" stretchType="RelativeToTallestObject" x="0" y="24" width="68" height="20" uuid="fbf4b225-fd82-44d5-867d-1075d2bc2b4c"/>
				<box topPadding="2" leftPadding="2">
					<topPen lineWidth="0.5" lineColor="#939597"/>
					<leftPen lineWidth="0.5" lineColor="#939597"/>
					<bottomPen lineWidth="0.5" lineColor="#939597"/>
					<rightPen lineWidth="0.5" lineColor="#939597"/>
				</box>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<text><![CDATA[#Action ID]]></text>
			</staticText>
			<staticText>
				<reportElement x="259" y="4" width="241" height="20" uuid="888a5f03-94db-41b2-968d-dd8ff1e277a3"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Indicator Details]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="RelativeToTallestObject" x="324" y="0" width="105" height="20" uuid="1f859397-173e-4545-a40f-5753b52dd914"/>
				<box topPadding="2" leftPadding="2">
					<topPen lineWidth="0.0" lineColor="#939597"/>
					<leftPen lineWidth="0.5" lineColor="#939597"/>
					<bottomPen lineWidth="0.0" lineColor="#939597"/>
					<rightPen lineWidth="0.5" lineColor="#939597"/>
				</box>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{target}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="RelativeToTallestObject" x="232" y="0" width="92" height="20" uuid="54efc0c6-d26d-4484-a6c4-ee983e982629"/>
				<box topPadding="2" leftPadding="2">
					<topPen lineWidth="0.0" lineColor="#939597"/>
					<leftPen lineWidth="0.5" lineColor="#939597"/>
					<bottomPen lineWidth="0.0" lineColor="#939597"/>
					<rightPen lineWidth="0.5" lineColor="#939597"/>
				</box>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{month_name}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="RelativeToTallestObject" x="542" y="0" width="290" height="20" uuid="0686b979-922c-46fa-ade6-93f0fa8310f8"/>
				<box topPadding="2" leftPadding="2">
					<topPen lineWidth="0.0" lineColor="#939597"/>
					<leftPen lineWidth="0.5" lineColor="#939597"/>
					<bottomPen lineWidth="0.0" lineColor="#939597"/>
					<rightPen lineWidth="0.5" lineColor="#939597"/>
				</box>
				<textElement markup="styled">
					<font size="8" isBold="false" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{remarks}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="RelativeToTallestObject" x="429" y="0" width="113" height="20" uuid="9bb7c746-f7bf-4503-abd0-f2b4827cad75"/>
				<box topPadding="2" leftPadding="2">
					<topPen lineWidth="0.0" lineColor="#939597"/>
					<leftPen lineWidth="0.5" lineColor="#939597"/>
					<bottomPen lineWidth="0.0" lineColor="#939597"/>
					<rightPen lineWidth="0.5" lineColor="#939597"/>
				</box>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{achievement}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="RelativeToTallestObject" x="68" y="0" width="164" height="20" uuid="f7855f72-a46a-45eb-b7c5-6cf6fc6e6084"/>
				<box topPadding="2" leftPadding="2">
					<topPen lineWidth="0.0" lineColor="#939597"/>
					<leftPen lineWidth="0.5" lineColor="#939597"/>
					<bottomPen lineWidth="0.0" lineColor="#939597"/>
					<rightPen lineWidth="0.5" lineColor="#939597"/>
				</box>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{indicator}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" stretchType="RelativeToTallestObject" x="0" y="0" width="68" height="20" uuid="3a5babd1-8a76-445e-bc8b-22ab8aa556b9"/>
				<box topPadding="2" leftPadding="2">
					<topPen lineWidth="0.0" lineColor="#939597"/>
					<leftPen lineWidth="0.5" lineColor="#939597"/>
					<bottomPen lineWidth="0.0" lineColor="#939597"/>
					<rightPen lineWidth="0.5" lineColor="#939597"/>
				</box>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{sequence}]]></textFieldExpression>
			</textField>
			<frame>
				<reportElement stretchType="RelativeToTallestObject" x="0" y="0" width="832" height="20" uuid="44b8fedb-5966-4f95-8ee7-20ba142745be"/>
				<box>
					<topPen lineWidth="0.5" lineColor="#999999"/>
					<leftPen lineWidth="0.5" lineColor="#999999"/>
					<bottomPen lineWidth="0.5" lineColor="#999999"/>
					<rightPen lineWidth="0.5" lineColor="#999999"/>
				</box>
			</frame>
		</band>
	</detail>
</jasperReport>
